networks:
  backend:
    driver: bridge
    driver_opts:
      com.docker.network.bridge.host_binding_ipv4: "127.0.0.1"

services:
  tech-inspect-bff:
    build:
      args:
        NODE_ENV: "production"
      context: .
      dockerfile: Dockerfile
    container_name: tech-inspect-bff
    environment:
      API_PORT: 8080
      NODE_ENV: "production"
    image: us.gcr.io/vitorblsantos/tech-inspect-bff:latest
    networks:
      - backend
    ports:
      - "8080:8080"
    restart: on-failure

  redis:
    image: redis
    ports:
      - "6379:6379"
